### 一. OSI参考模型
> 简介：全称是开放系统互连参考模型，定义了网络互连的基本参考模型，不同厂家的网络产品，只要遵照这个参考模型，就可以实现互连、互操作和可移植性<br>
特点：清晰地分开了服务、接口和协议这3个容易混淆的概念。服务描述了每一层的功能，接口定义了某层提供的服务如何被高层访问，而协议是每一层功能的实现方法

1. 物理层<br>
		利用传输介质为数据链路层提供物理联接
2. 数据链路层<br>
		负责在两个相邻结点之间的线路上无差错地传输以帧为单位的数据
3. 网络层<br>
		利用数据链路层所提供的相邻节点间的无差错数据传输功能，通过路由选择和中继功能，实现两个端系统之间的数据透明传送
4. 传输层<br>
		为两个端系统的会话层之间，提供建立、维护和取消传输连接的功能，负责端到端的可靠数据传输
5. 会话层<br>
    通过对话控制来决定使用何种通信方式，全双工通信或半双工通信或单工
6. 表示层<br>
    为应用层所提供的服务包括：语法转换、语法选择和联接管理
7. 应用层<br>
    直接面向用户的一层，用户的通信内容要由应用进程解决，这就要求应用层采用不同的应用协议来解决不同类型的应用要求，并且保证这些不同类型的应用所采用的底层通信协议是一致的

### 二. TCP/IP五层模型
![TCP/IP五层模型](http://pic.yupoo.com/mazhenghjj/4d3bf847/bdfdb2e6.png)
1. 物理层
2. 数据链路层: 处理连接网络的硬件部分
    - ARP协议：地址解析协议，根据IP地址获取MAC地址
3. 网络层: 用来处理在网络上流动的数据包
	  - IP协议：网际互联协议，为主机提供一种无连接、不可靠的的数据包传输服务
4. 传输层: 提供处于网络连接中的两台计算机之间的数据传输
    - UDP协议：用户数据包协议，无需建立连接就可以发送封装的 IP 数据包。适用场合：音频、视频（QQ）<br>
		  特点：无连接、资源消耗小、数据处理快，容易丢失数据包、传输体积有限（最大64k）
    - TCP协议：传输控制协议，面向连接的、可靠的、基于字节流的传输层通信协议
5. 应用层: 决定了向用户提供应用服务时通信的活动<br>
    - DNS协议：提供通过域名查找IP地址，或逆向从IP地址查找域名，端口号53
    - HTTP协议
    - HTTPS协议
    - FTP协议：文件传输协议，是用于在网络上进行文件传输的一套标准协议


### 三. HTTP协议
> 职责是生成针对目标Web服务器的HTTP请求报文，用于客户端和服务端的通信

1. 请求报文由请求方法、请求URI、协议版本和可选的请求首部字段和内容实体构成的

2. 响应报文基本上由协议版本、状态码（表示请求成功或失败的数字代码）、用以解释状态码的原因短语、可选的响应首部字段以及实体主体构成

3. 是一种无状态协议，即HTTP这个级别对发送过的请求或响应不做持久化的处理，这个为了更快地处理大量事务，确保协议的可伸缩性

4. 请求方式
	- GET 获取资源（请求已被URI识别的资源，指定的资源经过服务器解析后返回响应的内容）
	- POST 传输实体的主体 
	- PUT 传输文件
	- HEAD 获取报文首部（与GET一致，区别在于不返回主体部分，用于确认URI的有效性和资源更新的日期）
	- DELETE 删除文件
	- OPTIONS 询问支持的方法
	- TARCE 追踪路径
	- CONNECT：要求用隧道协议连接代理

5. 持久连接 keep-alive
> 概念：初始的HTTP版本中，每进行一次HTTP通信就会断开一次TCP连接，因此会增加通信量的开销，为了解决这个问题，HTTP/1.1提出了持久连接的方法（HTTP keep-alive）,特点是只要任意一端没有明确提出断开连接，则保持 TCP 连接状态

> 优点：持久连接的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。另外，减少开销的那部分时间，使HTTP 请求和响应能够更早地结束，这样 Web 页面的显示速度也就相应提高了，在HTTP/1.1中所有连接默认都是持久连接

6. 管线化
> 持久连接使得多数请求以管线化（pipelining）方式发送成为可能。从前发送请求后需等待并收到响应，才能发送下一个请求。管线化技术
出现后，不用等待响应亦可直接发送下一个请求

7. cookie状态管理
> 概念：无状态协议虽然可减少服务器的 CPU 及内存资源的消耗，但是无法根据之前的状态进行本次的请求处理，于是引入了cookie技术
+ Set-Cookie 在响应报文中返回Set-Cookie首部字段，通知客户端保存Cookie
  - 设置httpOnly属性，使js脚本无法获取cookie，可防止跨站脚本攻击
+ Cookie 服务器接收到的Cookie信息，加入请求首部字段Cookie

8. HTTP报文
	- 概念：用于 HTTP 协议交互的信息被称为 HTTP 报文，HTTP 报文本身是由多行数据构成的字符串文本，HTTP 报文大致可分为报文首部和报文主体两块
	- 报文首部：由请求行（请求报文）、状态行（响应报文）、首部字段组成
	- 内容协商机制是指客户端和服务器端就响应的资源内容进行交涉，然后提供给客户端最为适合的资源。内容协商会以响应资源的语言、字符集、编码方式等作为判断的基准
	- 获取部分内容的范围请求：执行范围请求时，会用到首部字段 Range 来指定资源的 byte 范围，响应返回206状态码，如果服务器端无法响应范围请求，则会返回状态码 200 OK 和完整的实体内容

9. 状态码
	- 200 请求正常处理
	- 204 请求成功处理，返回的响应报文中不包含实体的主体部分（HEAD请求）
	- 206 表示客户端进行了范围请求，响应报文中包含由Content-Range指定范围的实体内容

	- 301 资源永久重定向
	- 302 临时重定向
	- 303 与302作用相同，但是明确表示希望客户端以GET请求获取资源
	- 304 该状态码表示客户端发送附带条件的请求(指get请求中包含任一if-xxx首部字段)时，服务器端允许请求访问资源，但未满足条件的情况，不返回响应的任何主体部分，和重定向没有关系
	- 307 与302相同，禁止POST改成GET

	- 400 请求报文中存在语法错误，浏览器会像200一样对待这个状态码
	- 401 需要有通过HTTP认证的认证信息
	- 403 请求资源被服务器明确拒绝了
	- 404 服务器找不到请求资源

	- 500 服务器在处理请求时发生了错误
	- 503 服务器繁忙或停机

10. 通信数据转发程序：代理、网关、隧道
	- 代理：接受客户端发送的请求转发给其他服务器，<br>
				使用方法：缓存代理（转发响应时，预先把资源副本保存在代理服务器上，当遇到相同请求时，就可以不用再去源服务器请求了）、透明代理（不对报文做任何加工的代理）
				用途：利用缓存技术减少网络带宽的流量，组织内部针对特定网站的访问控制，以获取访问日志为主要目的<br>
	- 网关：利用网关可以由 HTTP 请求转化为其他协议通信，能提高通信的安全性
	- 隧道：使用 SSL 等加密手段进行通信，确保客户端能与服务器进行安全的通信
     
11. 缓存
> 缓存是指代理服务器或客户端本地磁盘内保存的资源副本

12. HTTP首部
	1. 请求报文：由报文首部（方法、URI、HTTP版本、首部字段）、空行、报文主体组成	
	2. 响应报文：由报文首部（HTTP版本、状态码、首部字段）、空行、报文主体组成
	3. 首部字段：给浏览器和服务器提供报文主体大小、所使用的语言、认证信息等内容
		+ 通用首部：请求报文和响应报文双方都会使用的首部
			- Cache-Control: 控制缓存行为，多个参数使用 “,” 分割
			- Connection: 1. 控制不再转发给代理服务器的首部字段，Connection: 不再转发的首部字段名。2. 管理持久连接，Connection: keep-alive
			- Date: 创建HTTP报文的日期和时间
			- Via: 为了追踪客户端与服务器之间的请求和响应报文的传输路径。报文经过代理或网关时，会先在首部字段 Via 中附加该服务器的信息，然后再进行转发
		+ 请求首部：从客户端向服务器发送请求报文中所使用的字段
			- Accept: 用户代理能够处理的媒体类型及媒体类型的相对优先级
			- Accept-Charset: 通知服务器用户代理支持的字符集及字符集的相对优先顺序
			- Accept-Encoding: 用来告知服务器用户代理支持的内容编码及内容编码的优先级顺序
			- Authorization: 用户代理的认证信息，通过服务器认证的用户代理会在接收到返回的401状态码响应后，把首部字段 Authorization 加入请求中
			- Host: 告知服务器，请求的资源所处的互联网主机名和端口号，是唯一一个必须被包含在请求内的首部字段，若服务器未设定主机名，那直接发送一个空值即可
			- If-xxx: 条件请求，服务器接收到附带条件的请求后，只有判断指定条件为真时，才会执行请求
			- Range: 告知服务器请求资源的指定范围，接收到附带 Range 首部字段请求的服务器，会在处理请求之后返回状态码为 206 的响应。无法处理时，会返回200及全部资源
			- Referer: 告知服务器请求的原始资源的 URI
		+ 响应首部字段：由服务器端向客户端返回响应报文中所使用的字段
			- Accept-Ranges: 用来告知客户端服务器是否能处理范围请求，可处理时为bytes，否则为none
			- Age: 告知客户端，源服务器在多久前创建了响应。字段值的单位为秒
			- ETag: 告知客户端实体标识。它是一种可将资源以字符串形式做唯一性标识的方式。服务器会为每份资源分配对应的 ETag 值
			- Location: 可以将响应接收方引导至某个与请求 URI 位置不同的资源。配合 3xx ：Redirection 的响应，提供重定向的URI
			- Server: 告知客户端当前服务器上安装的 HTTP 服务器应用程序的信息
			- Vary: 可对缓存进行控制，从代理服务器接收到源服务器返回包含 Vary 指定项的响应之后，若再要进行缓存，仅对请求中含有相同 Vary 指定首部字段的请求返回缓存
		+ 实体首部字段：实体部分所使用的首部，大部分是content-xxx形式
			- Content-Encoding: 会告知客户端服务器对实体的主体部分选用的内容编码方式

13. HTTPS
> 简介：HTTP 加上加密处理和认证以及完整性保护后即是HTTPS

+ HTTP协议的缺点
	- 通信使用明文，内容容易被窃听(1. 对通信加密，通过和SSL或(TSL-安全层传输协议)的组合使用，加密通信线路，2. 对内容即报文主体加密)
	- 不验证通信方身份，可能遭到伪装(客户端持有证书即可完成个人身份的确认)
	- 无法严明报文的完整性，可能被篡改(HTTP常用的是 MD5 和 SHA-1 等散列值校验的方法，以及用来确认文件的数字签名方法)
+ SSL 
	- 是独立于 HTTP 的协议，所有运行在应用层的协议都可以配合SSL协议使用
	- 采用公开密钥加密的加密方式：加密和解密共用一把密钥的方式叫共享密钥加密（对称密钥加密），加密时必须将密钥也发给对方，会有被窃取的风险，因此要引入公开密钥加密。<br>
		公开密钥加密使用一对非对称密钥加密，发送密文的一方使用公开密钥进行处理，接收方使用自己的私有密钥解密，私有密钥不会被发送，因此不会被盗窃走
	- HTTPS采用混合加密机制，在交换密钥环节使用公开密钥加密方式，之后的建立通信交换报文阶段则使用共享密钥加密方式
+ 存在的问题
	- 使用SSL时，处理速度会变慢：第一是通信慢，第二是消耗了大量CPU及内存资源，导致处理速度变慢，因此只有包含个人信息等敏感信息时，才使用HTTPS加密通信
	- 加密证书必须向认证机构（CA）购买

14. HTTP的瓶颈
	1. 一个连接上只能发送一个请求
	2. 请求只能从客户端开始，客户端不接受除响应外的指令
	3. 请求 / 响应首部未经压缩就发送。首部信息越多延迟越大，
	4. 每次发送相同的首部造成的浪费较多
	5. 解决：
		- ajax可以达到局部更新web页面，响应中的传输量会减少，实时从服务端获取数据，可能会导致大量请求产生
		- comat会先将响应置于挂起状态，当服务器端有内容更新时，再返回该响应。因此，服务器端一旦有更新，就可以立即
		反馈给客户端
		- SPDY属于会话层的协议：多路复用流、赋予请求优先级、压缩HTTP首部、推送功能、服务器提示功能。局限：SPDY 基本上只是将单个域名（ IP 地址）的通信多路复用，当一个 Web 网站上使用多个域名下的资源，改善效果就会受到限制

15. websocket通信
>简介：在单个TCP连接上进行的全双工通信协议，客户端与服务器的通信过程中可自由传输各种格式的数据<br>

特点：
* 支持由服务器向客户端推送数据的推送功能
* 减少通信量，建立起 WebSocket 连接，就希望一直保持连接状态。<br>
	为了实现websocket通信，需要在HTTP连接建立之后，完成一次握手（handshaking）步骤：需要用到upgrade首部字段，告诉服务器通信协议发生了改变，以达到握手的目的。
	当服务器同意时，返回101状态码

使用ws:或wss:作为URI，成功建立连接后，通信将会使用websocket独立的数据帧，然后就可以调用websocket的api进行通信了

16. web攻击技术
	+ 跨站脚本攻击（Cross-Site Scripting，XSS）是指通过存在安全漏洞的Web网站中，在注册用户的浏览器内运行非法的 HTML 标签或 JavaScript 进行的一种被动攻击<br>
	+	可能造成的影响:
		- 利用虚假输入表单骗取用户信息
		- 利用脚本窃取cookie值，帮助攻击者发送恶意请求
		- 显示伪造的文案或图片

	+ 跨站点请求伪造（Cross-Site Request Forgeries，CSRF）攻击是指攻击者通过设置好的陷阱，强制对已完成认证的用户进行非预期的个人信息或设定信息等某些状态更新，属于被动攻击
	+ 可能造成的影响
		- 利用已通过认证的用户权限购买商品
		- 利用已通过认证的用户权限更新设定信息

 		